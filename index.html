<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAGADIPA: Petualangan Tri Hita Karana</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-overlay" aria-live="polite" aria-busy="true">
        <div class="loading-card">
            <div class="loading-spinner" aria-hidden="true"></div>
            <p class="loading-text">Memuat petualangan...</p>
        </div>
    </div>
    <div id="game-container">
        <div id="game-world">
            <!-- The map or minigame will be dynamically rendered here -->
        </div>
        <div id="side-panel">
            <div id="character-dialogue-area">
                <div id="character-image-container">
                    <img id="character-image" src="" alt="Character">
                </div>
                <div id="dialogue-box">
                    <p id="character-name">Narator</p>
                    <p id="dialogue-text">Selamat datang! Klik sebuah lokasi di peta untuk memulai petualanganmu.</p>
                    <div id="dialogue-buttons"></div>
                </div>
            </div>
        </div>
        <div id="player-name-badge" class="hidden"></div>
        <button id="settings-button" class="btn"><img src="assets/img/set.png" alt="Settings"><span></span></button>
        <button id="book-button" class="btn hidden"><img src="assets/img/buku.png" alt="Buku Tumbuhan"><span>Buku Tumbuhan</span></button>
        <button id="quiz-button" class="btn hidden"><img src="assets/img/quiz.png" alt="Quiz"><span>Quiz</span></button>
    </div>

    <!-- Quiz Overlay Container -->
    <div id="quiz-overlay-container" class="hidden">
        <div id="quiz-card">
            <h2 id="quiz-title">Quiz Tri Hita Karana</h2>
            <p id="quiz-instructions">Pilih satu jawaban paling tepat. Gunakan tombol Sebelumnya/Selanjutnya untuk berpindah soal, lalu klik Selesai di akhir.</p>
            <div id="quiz-body">
                <div id="question-number"></div>
                <div id="quiz-question-text"></div>
                <div id="quiz-image-container"></div>
                <div id="quiz-options-container"></div>
            </div>
            <div id="quiz-navigation">
                <button id="prev-question-btn" class="nav-button" disabled>Sebelumnya</button>
                <button id="next-question-btn" class="nav-button">Selanjutnya</button>
                <button id="submit-quiz-btn" class="nav-button hidden">Selesai</button>
            </div>
        </div>
    </div>


    <audio id="background-music" src="assets/audio/bgm.mp3" loop></audio>
    <audio id="click-sfx" src="assets/audio/click.wav" preload="auto"></audio>

    <!-- Intro Overlay Container -->
    <div id="intro-overlay-container"> <!-- Active by default for intro -->
        <div id="intro-content">
            <h1 id="intro-title"></h1>
            <div id="intro-text-area"></div>
            <div id="intro-buttons">
                <button id="intro-next-btn">Lanjut</button>
            </div>
        </div>
    </div>

    <!-- Material Modal (for the book) -->
    <div id="material-modal" class="hidden">
        <div class="material-content">
            <span class="close-button" id="material-close-button">&times;</span>
            <div class="material-text-area">
                <!-- Content for book will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden">
        <div class="settings-content">
            <span class="close-button" id="settings-close-button">&times;</span>
            <h2>Pengaturan</h2>
            <button id="toggle-music-button" class="settings-option-button">Matikan Musik</button>
            <button id="reset-progress-button"  class="settings-option-button">Reset Progress</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/globals.js"></script>
    <script src="js/audio_utils.js"></script>
    <script src="js/core_functions.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/minigames.js"></script>
    <script src="js/intro_sequence.js"></script>
    <script src="js/quiz.js"></script> <!-- New quiz script -->
    <script src="js/main.js"></script>
</body>
</html>
