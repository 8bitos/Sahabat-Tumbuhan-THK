<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merangkai Canang Sari</title>
    <link rel="stylesheet" href="../shared_style.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div id="loading-overlay" aria-live="polite" aria-busy="true">
        <div class="loading-card">
            <div class="loading-spinner" aria-hidden="true"></div>
            <p class="loading-text">Memuat petualangan...</p>
        </div>
    </div>
    <img src="assets/img/meja.png" alt="Background" class="game-background">
    <div class="game-container">

        <!-- Items to be placed -->
        <div id="items-container">
            <!-- Items will be added here by script.js -->
        </div>

        <!-- Canang drop zone -->
        <div id="canang-base"></div>

        <!-- UI at the bottom -->
        <div class="bottom-ui-container">
            <img id="yana-character" src="../../assets/img/Yana/Yana-Smile.png" alt="Yana">
            <div class="dialogue-box">
                <p id="character-name">Yana</p>
                <p id="dialogue-text">Mari kita membuat Canang Sari!</p>
            </div>
        </div>

    </div>

    <!-- Video Modal -->
    <div id="video-modal" class="hidden">
        <div class="video-content">
            <span class="close-button">&times;</span>
            <video id="explanation-video" controls>
                <source src="assets/video/video_placeholder.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <p id="video-explanation-text">
                Parahyangan: Hubungan harmonis antara manusia dengan Tuhan, diwujudkan melalui rasa syukur dan persembahan.
            </p>
            <button id="exit-video-button" class="dialogue-button">Keluar Video</button>
        </div>
    </div>

    <!-- Tutorial Modal -->
    <div id="tutorial-modal" class="hidden">
        <div class="tutorial-content">
            <h2>Petunjuk Main</h2>
            <p>1. Pilih bahan sesuai instruksi Yana.</p>
            <p>2. Klik/seret bahan ke Alas Canang.</p>
            <p>3. Susun sesuai arah yang diminta.</p>
            <button id="tutorial-start-button" class="dialogue-button">Mulai</button>
        </div>
    </div>

    <audio id="bg-audio" src="../../assets/audio/pahrayangan.mp3" loop></audio>
    <audio id="click-sfx" src="../../assets/audio/click.wav" preload="auto"></audio>

    <script src="script.js"></script>
    <script>
        const loadingOverlay = document.getElementById('loading-overlay');
        const hideLoadingOverlay = () => {
            if (!loadingOverlay || loadingOverlay.classList.contains('hidden')) return;
            loadingOverlay.classList.add('hidden');
            loadingOverlay.setAttribute('aria-busy', 'false');
        };

        window.addEventListener('load', () => {
            hideLoadingOverlay();
        });

        setTimeout(() => {
            hideLoadingOverlay();
        }, 2500);
    </script>
</body>
</html>
