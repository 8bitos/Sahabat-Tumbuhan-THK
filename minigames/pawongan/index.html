<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pawongan: Resep Warisan Nenek</title>
    <link rel="stylesheet" href="../shared_style.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-overlay" aria-live="polite" aria-busy="true">
        <div class="loading-card">
            <div class="loading-spinner" aria-hidden="true"></div>
            <p class="loading-text">Memuat petualangan...</p>
        </div>
    </div>
    <div class="game-container">
        <!-- Left Panel: The Recipe Book -->
        <div class="recipe-book-panel">
            <h2>Resep Warisan Nenek</h2>
            <p id="riddle-text">Pilih resep untuk memulai...</p>
            <hr>
            <div id="sari-dialogue">
                <img id="sari-avatar" src="../../assets/img/Sari/Sari-Smile.png" alt="Sari">
                <p id="dialogue-text">Buku nenek penuh teka-teki. Aku harus mencari tahu bahan yang benar.</p>
            </div>
        </div>

        <!-- Right Panel: The Kitchen -->
        <div class="kitchen-panel">
            <div id="pantry">
                <h3>Lemari Bahan</h3>
                <div id="ingredients-shelf">
                    <!-- Ingredients will be populated here -->
                </div>
            </div>
            <div id="mixing-station">
                <h3>Mangkuk Racik</h3>
                <div id="mixing-bowl">
                    <!-- Dropped ingredients will appear here -->
                </div>
                <button id="check-button" class="btn">Buat Ramuan!</button>
            </div>
        </div>
    </div>

    <!-- Tooltip for ingredient info -->
    <div id="tooltip" class="hidden"></div>

    <!-- Tutorial Modal -->
    <div id="tutorial-modal" class="hidden">
        <div class="tutorial-content">
            <h2>Petunjuk Main</h2>
            <p>1. Baca petunjuk resep di buku kiri.</p>
            <p>2. Pilih maksimal 3 bahan yang sesuai.</p>
            <p>3. Seret/klik bahan ke mangkuk, lalu tekan "Buat Ramuan!".</p>
            <button id="tutorial-start-button" class="btn">Mulai</button>
        </div>
    </div>

    <!-- Success Popup -->
    <div id="success-popup" style="visibility: hidden;">
        <div class="popup-content">
            <h2>Ramuan Berhasil Dibuat!</h2>
            <div id="popup-product-shape"></div>
            <h3 id="popup-product-name"></h3>
            <p id="popup-product-description"></p>
            <button id="next-recipe-button" class="btn">Resep Selanjutnya</button>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="video-modal" class="hidden">
        <div class="video-content">
            <span class="close-button">&times;</span>
            <video id="explanation-video" controls autoplay>
                <source src="assets/video/placeholder_video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <p id="video-explanation-text">
                <!-- Educational text related to the video will go here -->
            </p>
        </div>
    </div>

    <audio id="bg-audio" src="../../assets/audio/pawongan.mp3" loop></audio>
    <audio id="click-sfx" src="../../assets/audio/click.wav" preload="auto"></audio>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../../tts.js"></script>
    <script src="script.js"></script>
    <script>
        const loadingOverlay = document.getElementById('loading-overlay');
        const hideLoadingOverlay = () => {
            if (!loadingOverlay || loadingOverlay.classList.contains('hidden')) return;
            loadingOverlay.classList.add('hidden');
            loadingOverlay.setAttribute('aria-busy', 'false');
        };

        window.addEventListener('load', () => {
            hideLoadingOverlay();
        });

        setTimeout(() => {
            hideLoadingOverlay();
        }, 2500);
    </script>
</body>
</html>
